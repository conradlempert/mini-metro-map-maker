<html>
<head>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous">
  </script>
  <script src="https://kit.fontawesome.com/c6ea4c2af9.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body>
  <script type="module" src="/src/main.ts"></script>
<div id="start" style="text-align: center">
  <h1 style="margin-top: 250px;">Mini Metro Shape Tool</h1><br>
  <div style="display: inline-block">
  <button type="button" id="newMap" class="btn btn-success">
    <i class="fas fa-plus"></i>&nbsp;New Map
  </button>
  <input type="file" accept=".json" id="uploadMapFile" style="display:none"/>
  <button type="button" id="uploadMapButton" class="btn btn-secondary">
    <i class="fas fa-folder-open"></i>&nbsp;Open Shapes File (JSON)
  </button>
</div>
</div>
<div style="padding: 5%; height: 100%; display: none" id="mainWrapper">
  <div style="height: 75%" id="canvasContainer">
    <canvas id="backgroundCanvas" style="border: 1px solid black; position: absolute; left: 0; top: 0; height: 75%; margin: 5%"></canvas>
    <canvas id="mainCanvas" style="border: 1px solid black; position: absolute; left: 0; top: 0; height: 75%; margin: 5%"></canvas>
  </div>

  <br>
  <label id="coordinate">&nbsp;</label><br><br>
  <button type="button" id="selectTool" class="btn btn-dark">
    <i class="fas fa-mouse-pointer"></i>
  </button>
  <button type="button" id="markerTool" class="btn btn-outline-dark">
    <i class="fas fa-map-marker"></i>
  </button>
  <button type="button" id="polygonTool" class="btn btn-outline-dark">
    <i class="fas fa-draw-polygon"></i>
  </button>
  <div style="float:right">
    <button type="button" id="export" class="btn btn-success">
      <i class="fas fa-download"></i>
    </button>
    <button type="button" id="help" class="btn btn-primary">
      <i class="fas fa-question"></i>
    </button>
  </div>
</div>
<div id="clipboardWrapper" style="height: 100%; display: none; vertical-align: top; padding-top: 5%; width: 300px">
  <h1>Clipboard</h1>
  <p style="font-family: monospace" id="clipboard"></p>
</div>

<div id="createModal" class="modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Choose settings</h5>
        <button id="closeModalButton" type="button" class="btn btn-text" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label for="city_width" class="form-label">City size</label>
        <div class="input-group mb-3">
          <input id="city_width" type="text" value="5000" class="form-control">
          <span class="input-group-text">x</span>
          <input id="city_height" type="text" value="5000" class="form-control">
        </div>
        <label for="origin_x" class="form-label">Position of (0/0) (default is middle)</label>
        <div class="input-group mb-3">
          <input id="origin_x" type="text" value="2500" class="form-control">
          <span class="input-group-text">/</span>
          <input id="origin_y" type="text" value="2500" class="form-control">
        </div>
        <label for="background_image" class="form-label">Background image</label>
        <div class="input-group mb-3">
          <input type="file" accept=".jpg,.png" class="form-control" id="background_image">
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="desaturate">
          <label class="form-check-label" for="desaturate">
            Desaturate image
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="createCityMapButton" class="btn btn-primary">Create city map</button>
      </div>
    </div>
  </div>
</div>
<div id="helpModal" class="modal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Help</h5>
        <button id="closeHelp" type="button" class="btn btn-text" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Use the <i class="fas fa-map-marker"></i> and <i class="fas fa-draw-polygon"></i> tool to create shapes.</p>
        <p><i class="fas fa-mouse-pointer"></i> a shape to select it and to copy its coordinates.</p>
        <p>Press <i class="fas fa-backspace"></i> to delete the entire selected shape.</p>
        <p>Shift + <i class="fas fa-mouse-pointer"></i> a point to delete it.</p>
        <p>Drag a point to move it around.</p>
        <p>Press Esc to deselect.</p>
        <p>Press <i class="fas fa-download"></i> to save the shapes you designed as a JSON file.</p>
      </div>
    </div>
  </div>
</div>
</body>
</html>
